{% extends "base.html" %}
{% block head %}
    <link rel="canonical" href="{{ SITEURL }}/{{ article.url }}">
    <meta name="keywords" content="{{ article.tags|join(', ')  }}">
{% if TWITTER_USERNAME %}
    <meta name="twitter:card" content="summary">
    <meta name="twitter:creator" content="@{{ TWITTER_USERNAME }}">
{% endif %}
    <meta property="og:url" content="{{ SITEURL }}/{{ article.url }}">
    <meta property="og:title" content="{{ article.title }}">
    <meta property="og:description" content="{{ article.content|truncate(length=200) }}">
    <meta property="og:image" content="">
{% endblock %}

{% block title %}{{ article.title }}: {% endblock %}

{% block header %}
        <li><a id="meta">Posted on {{ article.locale_date }}</a></li>
{% endblock %}

{% block content %}
      <article>
        <div class="article_title">
          <h3><a href="{{ SITEURL }}/{{ article.url }}">{{ article.title }}</a></h3>
        </div>
        <div class="article_text">
          {{ article.content }}
        </div>
        <div class="article_meta">
          <p>Category: <a href="{{ SITEURL }}/{{ article.category.url }}">{{ article.category }}</a></p>
{% if article.tags %}
          <p>Tags:
{% for tag in article.tags %}
            <a href="{{ SITEURL }}/{{ tag.url }}">{{ tag }}</a>{% if not loop.last %},{% endif %}
{% endfor %}
          </p>
{% endif %}
        </div>
        <div class="article_social">
          <ul>
{% if TWITTER_USERNAME %}
            <li><a href="http://twitter.com/share" class="twitter-share-button" data-count="horizontal" data-via="{{TWITTER_USERNAME}}">Tweet</a></li><script type="text/javascript" src="http://platform.twitter.com/widgets.js"></script>
{% endif %}

{% if GOOGLE_PLUS_USERNAME %}
            <li><div class="g-plusone"></div></li>
            <script type="text/javascript">
              (function() {
                var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
                po.src = 'https://apis.google.com/js/platform.js';
                var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
              })();
            </script>
{% endif %}
          </ul>
        </div>
{% if DISQUS_SITENAME %}
          <div id="article_comments" style="display:block">
              <div id="disqus_thread"></div>
              <script type="text/javascript">
                 var disqus_identifier = "{{ article.url }}";
                 (function() {
                 var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                 dsq.src = 'http://{{ DISQUS_SITENAME }}.disqus.com/embed.js';
                 (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
                })();
              </script>
          </div>
{% endif %}
      
      </article>
{% endblock %}

{% block footer %}
        <script language="javascript">
            function toggleComments() {
                var commentDiv = document.getElementById("article_comments");
                (commentDiv.style.display == "none") ? commentDiv.style.display = "block" : commentDiv.style.display = "none";
                return false;
            }
        </script>
{% endblock %}
